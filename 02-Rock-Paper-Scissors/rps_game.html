<!DOCTYPE html>
<html>
        <head>
            <link rel="stylesheet" href="styles.css">

        </head>
        <body>
            <p class="title">
                Rock Paper Scissors
            </p>

            <img src = "images/rock-emoji.png" class="move-img" onclick="playGame('rock')">
            <img src = "images/paper-emoji.png" class="move-img" onclick="playGame('paper')">
            <img src = "images/scissors-emoji.png" class="move-img" onclick="playGame('scissors')">

            <button onclick="
                score.wins = 0;
                score.ties = 0;
                score.losses = 0;
                gameResult = '';
                localStorage.removeItem('score');
                updateScore();
                updateState();
                updateMove();
            ">
                Reset Score
            </button>
            <p class="gameResult"></p>
            <p class="moves"></p>
            <p class="score"></p>
 
            <script>
                // Initialize score from localStorage or default to 0 if first time playing
                  let score = JSON.parse(localStorage.getItem('score')) || {
                    wins: 0,
                    ties: 0,
                    losses: 0
                };


                function playGame(userMove){
                    const compMove = computerMove();
                    gameResult = '';

                    if (userMove === 'rock'){
                        if (compMove === 'rock'){
                        gameResult = "It's a tie";
                        
                        }
                        else if (compMove === 'paper'){
                            gameResult = 'You lose';
                        }
                        else if (compMove === 'scissors'){
                            gameResult = 'You win';
                        }
                    }
                    else if (userMove === 'paper'){
                        if (compMove === 'rock'){
                        gameResult = 'You win';
                        }
                        else if (compMove === 'paper'){
                            gameResult = "It's a tie";
                        }
                        else if (compMove === 'scissors'){
                            gameResult = 'You lose';
                        }
                    }
                    else if (userMove === 'scissors'){
                        if (compMove === 'rock'){
                        gameResult = 'You lose';
                        }
                        else if (compMove === 'paper'){
                            gameResult = 'You win';
                        }
                        else if (compMove === 'scissors'){
                            gameResult = "It's a tie";
                        }
                    }

                    if (gameResult === 'You win'){
                        score.wins += 1;
                    }
                    else if (gameResult === "It's a tie"){
                        score.ties += 1;
                    }
                    else if (gameResult === "You lose"){
                        score.losses += 1;
                    }

                    localStorage.setItem('score', JSON.stringify(score)); //saves values even though page reload
                    updateScore();
                    updateState();
                    updateMove(userMove, compMove);
                }

                function computerMove(){
                let compMove = '';
                const randomNum = Math.random();
                if (randomNum <= 1/3){
                    compMove = 'rock';
                }
                else if (randomNum <= 2/3){
                    compMove = 'paper';
                }
                else{
                    compMove = 'scissors';
                }

                return compMove;
                }

                const object1 = {
                    message: 'hello'
                };

                function updateState(){
                    if (gameResult != ''){
                        document.querySelector(".gameResult").innerHTML = gameResult;
                    }
                    else{
                        document.querySelector(".gameResult").innerHTML = '';
                    }
                }

                function updateScore(){
                    document.querySelector('.score').innerHTML = `Wins: ${score.wins}, Losses: ${score.losses}, Ties: ${score.ties}`; //update score                    }
                }

                function updateMove(userMove, compMove){
                    if (gameResult != ''){
                        document.querySelector('.moves').innerHTML = `You picked: ${userMove} Computer Picked: ${compMove}`;
                    }
                    else{
                        document.querySelector('.moves').innerHTML = '';
                    }
                }

                const object2 = object1; //object 2 holds a reference to object 1
                object1.message = 'Good job';
                console.log(object1);
                console.log(object2);
                const {message} = object1;
                console.log(message);
            </script>

        </body>
</html>